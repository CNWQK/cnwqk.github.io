# 由腾讯Hunyuan大模型整理：Cloudflare 2025年11月严重瘫痪事件梳理

## 一、事件概览
- **时间**：2025年11月18日（UTC）  
  核心流量在**14:30**左右恢复，全部服务在**17:06**完全恢复；整体持续约**5小时46分钟**，其中核心不可用约**3小时10分钟**。  
  Cloudflare称其网络承载全球约**20%**的互联网请求，此次为**2019年以来最严重**的中断。官方明确排除**DDoS/恶意攻击**因素。
- **影响**：大量网站与应用出现**HTTP 5xx**（500/502/520）错误、登录失败、页面资源加载失败；波及**X（Twitter）**、**ChatGPT**、**Spotify**、**Discord**、**Shopify**、**Canva**、**League of Legends**等头部服务，甚至连故障监测平台**DownDetector**也一度受影响。事件期间，Cloudflare 股价当日收跌约**2.83%**。

## 二、时间线（UTC）
- **11:05**：一次**数据库权限变更**（ClickHouse）意外改变了查询语义，导致生成“特征文件”的查询返回**重复条目**。  
- **11:20**：客户流量开始出现大面积错误，核心代理返回**5xx**。  
- **11:32**：启动人工调查，初期一度误判为**超大规模DDoS**。  
- **13:05**：对**Workers KV**与**Access**启用临时**绕过机制**，降低连锁影响。  
- **14:24**：确认根因为**Bot Management**“特征文件”异常增大，停止其生成与传播。  
- **14:30**：核心流量基本恢复。  
- **17:06**：所有系统完全恢复。  

> 上述时间线来自 Cloudflare 官方事后分析与多家权威报道的交叉印证。

## 三、根因与技术机制
- **直接根因**：例行**数据库权限变更**使“特征文件”查询产生**重复行**，文件体积**超过上限（约200个特征）**；该文件被推送至全球边缘节点后，导致**Bot Management**模块加载失败并触发**核心代理（FL/FL2）**崩溃或异常，从而对所有经由该模块的流量返回**HTTP 5xx**。部分旧引擎（FL）未崩溃，但将**Bot Score 置零**，造成合法流量被误判为机器人。
- **传播与诊断难点**：特征文件**约每5分钟**自动生成并在集群**逐步更新**，正确与错误版本交替出现，导致症状**时好时坏**、定位困难；初期还被误判为**DDoS**。  
  修复动作包括：停止错误文件传播、**回滚至已知良好版本**、**强制重启核心代理**，并对**Workers KV/Access**实施临时旁路。

## 四、影响范围与业务后果
- **终端用户**：大量网站与应用**无法访问/登录**，关键业务（如**电商、支付、登录/鉴权、API**）中断；部分**流媒体与游戏**出现登录/匹配异常；**公共部门与交通系统**的部分数字服务受波及（如**美国新泽西公交系统**）。
- **互联网生态**：事件再次暴露**基础设施集中化**的系统性风险——当单一关键提供商出现灾难性故障时，下游应用会出现**级联失效**。监测显示，故障高峰期**DownDetector**在美国的报告量超过**10万**条。
